{"version":3,"sources":["cmps/Header.jsx","services/upload-service.js","store/actions/userMsgActions.js","store/actions/tableActions.js","cmps/Upload.jsx","cmps/Table.jsx","cmps/Enrich.jsx","cmps/UserMsg.jsx","pages/App.jsx","store/reducers/tableReducer.js","store/reducers/userMsgReducer.js","store/index.js","index.js"],"names":["Header","className","BASE_URL","uploadService","enrichData","formatData","data","dataArr","split","headers","splice","filter","r","map","row","rowArr","a","axios","post","res","setDoneUserMsg","wait","dispatch","setTimeout","type","userMsg","msg","highlight","setTableData","shouldFormat","formattedData","enrichedData","Upload","useDispatch","processFile","file","reader","FileReader","onload","result","readAsText","htmlFor","id","name","onChange","ev","header","target","files","Table","useSelector","state","tableModule","getRowData","strHtmls","key","push","str","idx","Object","keys","Enrich","userMsgModule","onEnrich","disabled","length","onClick","UserMsg","App","INITIAL_STATE","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","rootReducer","combineReducers","action","store","createStore","applyMiddleware","thunk","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"gMAAe,SAASA,IACvB,OACC,yBAASC,UAAU,SAAnB,SACC,iD,0DCDGC,EAAoD,QAE7CC,EAAgB,CAC5BC,W,4CACAC,WAQD,SAAoBC,GACnB,IAAMC,EAAUD,EAAKE,MAAM,QACrBC,EAAUF,EAAQ,GAAGC,MAAM,KAEjC,OADaD,EAAQG,OAAO,GAAGC,QAAO,SAAAC,GAAC,OAAIA,KAC/BC,KAAI,SAAAC,GAAQ,IAAD,EAChBC,EAASD,EAAIN,MAAM,KACzB,OAAO,EAAP,iBACEC,EAAQ,IAAMM,EAAO,IADvB,cAEEN,EAAQ,GAAKM,EAAO,IAFtB,cAGEN,EAAQ,GAAKM,EAAO,IAHtB,cAIEN,EAAQ,IAAMM,EAAO,IAJvB,cAKEN,EAAQ,IAAMM,EAAO,IALvB,cAMEN,EAAQ,GAAKM,EAAO,IANtB,cAOEN,EAAQ,IAAMM,EAAO,IAPvB,cAQEN,EAAQ,IAAMM,EAAO,IARvB,cASEN,EAAQ,IAAMM,EAAO,IATvB,cAUEN,EAAQ,IAAMM,EAAO,IAVvB,cAWEN,EAAQ,KAAOM,EAAO,KAXxB,cAYEN,EAAQ,IAAMM,EAAO,KAAOA,EAAO,IAAM,IAZ3C,cAaEN,EAAQ,KAAOM,EAAO,KAbxB,cAcEN,EAAQ,KAAOM,EAAO,KAdxB,O,4CAXF,WAA0BT,GAA1B,eAAAU,EAAA,sEACmBC,IAAMC,KAAN,UAAchB,EAAd,UAAgC,CAAEI,SADrD,cACOa,EADP,yBAEQA,EAAIb,MAFZ,4C,sBC0BO,SAASc,IAA6B,IAAdC,EAAa,uDAAN,IACrC,8CAAO,WAAMC,GAAN,SAAAN,EAAA,sDACNO,YAAW,WACVD,EAAS,CACRE,KAAM,eACNC,QAAS,CAAEC,IAAK,GAAIC,UAAW,GAAIH,KAAM,YAExCH,GANG,2CAAP,sDCjCM,SAASO,EAAatB,EAAMuB,GAClC,8CAAO,WAAMP,GAAN,mBAAAN,EAAA,0DACFa,EADE,gBAECC,EAAgB3B,EAAcE,WAAWC,GAC/CgB,EAAS,CAAEE,KAAM,WAAYlB,KAAMwB,IAH9B,uCAMJR,EDHH,uCAAO,WAAMA,GAAN,SAAAN,EAAA,sDACNM,EAAS,CACRE,KAAM,eACNC,QAAS,CAAEC,IAAK,gBAAiBC,UAAW,MAAOH,KAAM,cAHpD,2CAAP,uDCHO,SAO2BrB,EAAcC,WAAWE,GAPpD,gBAOIyB,EAPJ,EAOIA,aACRT,EAAS,CAAEE,KAAM,WAAYlB,KAAMyB,IACnCT,EDGH,uCAAO,WAAMA,GAAN,SAAAN,EAAA,sDACNM,EAAS,CACRE,KAAM,eACNC,QAAS,CAAEC,IAAK,2BAA4BC,UAAW,KAAMH,KAAM,aAEpEF,EAASF,KALH,2CAAP,uDCZO,kDAWJE,EDWH,uCAAO,WAAMA,GAAN,SAAAN,EAAA,sDACNM,EAAS,CACRE,KAAM,eACNC,QAAS,CAAEC,IAAK,sBAAuBC,UAAW,KAAMH,KAAM,UAE/DF,EAASF,KALH,2CAAP,uDCtBO,0DAAP,sDCAc,SAASY,IACvB,IAAMV,EAAWW,cAaXC,EAAc,SAAAC,GACnB,IAAIC,EAAS,IAAIC,WACjBD,EAAOE,OAAS,WACfhB,EAASM,EAAaQ,EAAOG,QAAQ,KAEtCH,EAAOI,WAAWL,IAGnB,OACC,0BAASlC,UAAU,SAAnB,UACC,uBAAOwC,QAAQ,OAAf,yBACA,uBAAOjB,KAAK,OAAOkB,GAAG,OAAOC,KAAK,OAAOC,SAtBrB,SAAAC,GACrB,IDa6BC,ECbvBX,EAAOU,EAAGE,OAAOC,MAAM,GAC7B,GAAIb,EAAM,CACT,GAAkB,aAAdA,EAAKX,KACR,OAAOF,EFoCV,uCAAO,WAAMA,GAAN,SAAAN,EAAA,sDACNM,EAAS,CACRE,KAAM,eACNC,QAAS,CAAEC,IAAK,oBAAqBC,UAAW,IAAKH,KAAM,WAE5DF,EAASF,KALH,2CAAP,uDElCEE,GDQ4BwB,ECRJX,EAAKQ,KDS/B,uCAAO,WAAMrB,GAAN,SAAAN,EAAA,sDACNM,EAAS,CAAEE,KAAM,aAAcsB,WADzB,2CAAP,wDCREZ,EAAYC,UCZA,SAASc,IAAS,IAAD,EACNC,aAAY,SAAAC,GAAK,OAAIA,EAAMC,eAA5C9C,EADuB,EACvBA,KAAMwC,EADiB,EACjBA,OAEd,IAAKxC,EACJ,OACC,0BAASL,UAAU,cAAnB,UACC,8DACA,uBAAOwC,QAAQ,OAAf,+BACA,8CAIH,IAAMY,EAAa,SAAAvC,GAClB,IAAMwC,EAAW,GACjB,IAAK,IAAMC,KAAOzC,EACjBwC,EAASE,KAAK1C,EAAIyC,IAEnB,OAAOD,EAASzC,KAAI,SAAC4C,EAAKC,GAAN,OAAc,oCAAeD,QAAf,IAAeA,IAAO,IAAbC,OAGtCjD,EAAUH,EAAK,GAAKqD,OAAOC,KAAKtD,EAAK,IAAM,GACjD,OACC,0BAASL,UAAU,kBAAnB,UACE6C,GAAU,6BAAKA,IAChB,kCACC,gCACC,6BACErC,EAAQI,KAAI,SAAAiC,GAAM,OAClB,6BAAkBA,GAATA,UAIZ,gCACExC,EAAKO,KAAI,SAACC,EAAK4C,GAAN,OACT,6BAAeL,EAAWvC,IAAjB4C,cCjCA,SAASG,IACvB,IAAMvC,EAAWW,cACT3B,EAAS4C,aAAY,SAAAC,GAAK,OAAIA,EAAMC,eAApC9C,KACFmB,EAAUyB,aAAY,SAAAC,GAAK,OAAIA,EAAMW,iBAErCC,EAAQ,uCAAG,sBAAA/C,EAAA,sDAChBM,EAASM,EAAatB,IADN,2CAAH,qDAId,OACC,yBAASL,UAAU,SAAnB,SACC,wBAAQ+D,UAAW1D,EAAK2D,QAA2B,SAAjBxC,EAAQD,KAAiB0C,QAASH,EAApE,4BCZY,SAASI,IAAW,IAAD,EACAjB,aAAY,SAAAC,GAAK,OAAIA,EAAMW,iBAApDpC,EADyB,EACzBA,IAAKC,EADoB,EACpBA,UAAWH,EADS,EACTA,KACxB,OACC,yBAASvB,UAAW,YAAcuB,EAAlC,SACC,8BACEE,EADF,IACO,+BAAOC,SCaFyC,MAdf,WACC,OACC,uBAAMnE,UAAU,MAAhB,UACC,cAACD,EAAD,IACA,0BAASC,UAAU,UAAnB,UACC,cAAC+B,EAAD,IACA,cAAC6B,EAAD,IACA,cAACZ,EAAD,IACA,cAACkB,EAAD,W,8BCdEE,EAAgB,CACrB/D,KAAM,GACNwC,OAAQ,ICFHuB,EAAgB,CACrB3C,IAAK,GACLC,UAAW,GACXH,KAAM,QCGD8C,EAAmBC,OAAOC,sCAAwCC,IAGlEC,EAAcC,YAAgB,CACnCvB,YFL2B,WAAoC,IAAnCD,EAAkC,uDAA1BkB,EAAeO,EAAW,uCAC9D,OAAQA,EAAOpD,MACd,IAAK,WACJ,OAAO,2BAAK2B,GAAZ,IAAmB7C,KAAMsE,EAAOtE,OACjC,IAAK,aACJ,OAAO,2BAAK6C,GAAZ,IAAmBL,OAAQ8B,EAAO9B,SACnC,QACC,OAAOK,IEDTW,cDL6B,WAAoC,IAAnCX,EAAkC,uDAA1BkB,EAAeO,EAAW,uCAChE,OAAQA,EAAOpD,MACd,IAAK,eACJ,OAAO,2BAAK2B,GAAUyB,EAAOnD,SAC9B,QACC,OAAO0B,MCGG0B,EAAQC,YAAYJ,EAAaJ,EAAiBS,YAAgBC,OCP/EC,IAASC,OACR,cAAC,IAAMC,WAAP,UACC,cAAC,IAAD,CAAUN,MAAOA,EAAjB,SACC,cAAC,EAAD,QAGFO,SAASC,eAAe,W","file":"static/js/main.6bf9b9e2.chunk.js","sourcesContent":["export default function Header() {\n\treturn (\n\t\t<section className='header'>\n\t\t\t<p>Schools Finder</p>\n\t\t</section>\n\t)\n}\n","import axios from 'axios'\n\nconst BASE_URL = process.env.NODE_ENV !== 'development' ? '/api/' : 'http://localhost:3030/api/'\n\nexport const uploadService = {\n\tenrichData,\n\tformatData,\n}\n\nasync function enrichData(data) {\n\tconst res = await axios.post(`${BASE_URL}enrich`, { data })\n\treturn res.data\n}\n\nfunction formatData(data) {\n\tconst dataArr = data.split('\\r\\n')\n\tconst headers = dataArr[0].split(',')\n\tconst rows = dataArr.splice(1).filter(r => r)\n\treturn rows.map(row => {\n\t\tconst rowArr = row.split(',')\n\t\treturn {\n\t\t\t[headers[0]]: +rowArr[0],\n\t\t\t[headers[1]]: rowArr[1],\n\t\t\t[headers[2]]: rowArr[2],\n\t\t\t[headers[3]]: +rowArr[3],\n\t\t\t[headers[4]]: +rowArr[4],\n\t\t\t[headers[5]]: rowArr[5],\n\t\t\t[headers[6]]: +rowArr[6],\n\t\t\t[headers[7]]: +rowArr[7],\n\t\t\t[headers[8]]: +rowArr[8],\n\t\t\t[headers[9]]: +rowArr[9],\n\t\t\t[headers[10]]: +rowArr[10],\n\t\t\t[headers[11]]: rowArr[11] ? +rowArr[11] : '',\n\t\t\t[headers[12]]: +rowArr[12],\n\t\t\t[headers[13]]: +rowArr[13],\n\t\t}\n\t})\n}\n","export function setUserMsg(userMsg) {\n\treturn async dispatch => {\n\t\tdispatch({ type: 'SET_USER_MSG', userMsg })\n\t}\n}\n\nexport function setFetchUserMsg() {\n\treturn async dispatch => {\n\t\tdispatch({\n\t\t\ttype: 'SET_USER_MSG',\n\t\t\tuserMsg: { msg: 'Fetching data', highlight: '...', type: 'fetching' },\n\t\t})\n\t}\n}\n\nexport function setSuccessUserMsg() {\n\treturn async dispatch => {\n\t\tdispatch({\n\t\t\ttype: 'SET_USER_MSG',\n\t\t\tuserMsg: { msg: 'Data loaded successfully', highlight: ':)', type: 'success' },\n\t\t})\n\t\tdispatch(setDoneUserMsg())\n\t}\n}\n\nexport function setFailUserMsg() {\n\treturn async dispatch => {\n\t\tdispatch({\n\t\t\ttype: 'SET_USER_MSG',\n\t\t\tuserMsg: { msg: 'Data loading failed', highlight: ':(', type: 'fail' },\n\t\t})\n\t\tdispatch(setDoneUserMsg())\n\t}\n}\n\nexport function setDoneUserMsg(wait = 2000) {\n\treturn async dispatch => {\n\t\tsetTimeout(() => {\n\t\t\tdispatch({\n\t\t\t\ttype: 'SET_USER_MSG',\n\t\t\t\tuserMsg: { msg: '', highlight: '', type: 'done' },\n\t\t\t})\n\t\t}, wait)\n\t}\n}\n\nexport function setErrorUserMsg() {\n\treturn async dispatch => {\n\t\tdispatch({\n\t\t\ttype: 'SET_USER_MSG',\n\t\t\tuserMsg: { msg: 'Invalid file type', highlight: '!', type: 'error' },\n\t\t})\n\t\tdispatch(setDoneUserMsg())\n\t}\n}\n","import { uploadService } from '../../services/upload-service.js'\nimport { setSuccessUserMsg, setFailUserMsg, setFetchUserMsg } from './userMsgActions.js'\n\nexport function setTableData(data, shouldFormat) {\n\treturn async dispatch => {\n\t\tif (shouldFormat) {\n\t\t\tconst formattedData = uploadService.formatData(data)\n\t\t\tdispatch({ type: 'SET_DATA', data: formattedData })\n\t\t} else {\n\t\t\ttry {\n\t\t\t\tdispatch(setFetchUserMsg())\n\t\t\t\tconst { enrichedData } = await uploadService.enrichData(data)\n\t\t\t\tdispatch({ type: 'SET_DATA', data: enrichedData })\n\t\t\t\tdispatch(setSuccessUserMsg())\n\t\t\t} catch (err) {\n\t\t\t\tdispatch(setFailUserMsg())\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport function setTableHeader(header) {\n\treturn async dispatch => {\n\t\tdispatch({ type: 'SET_HEADER', header })\n\t}\n}\n","import { useDispatch } from 'react-redux'\nimport { setTableData, setTableHeader } from '../store/actions/tableActions.js'\nimport { setErrorUserMsg } from '../store/actions/userMsgActions.js'\n\nexport default function Upload() {\n\tconst dispatch = useDispatch()\n\n\tconst onInputChange = ev => {\n\t\tconst file = ev.target.files[0]\n\t\tif (file) {\n\t\t\tif (file.type !== 'text/csv') {\n\t\t\t\treturn dispatch(setErrorUserMsg())\n\t\t\t}\n\t\t\tdispatch(setTableHeader(file.name))\n\t\t\tprocessFile(file)\n\t\t}\n\t}\n\n\tconst processFile = file => {\n\t\tvar reader = new FileReader()\n\t\treader.onload = () => {\n\t\t\tdispatch(setTableData(reader.result, true))\n\t\t}\n\t\treader.readAsText(file)\n\t}\n\n\treturn (\n\t\t<section className='upload'>\n\t\t\t<label htmlFor='file'>Choose File</label>\n\t\t\t<input type='file' id='file' name='file' onChange={onInputChange} />\n\t\t</section>\n\t)\n}\n","import { useSelector } from 'react-redux'\n\nexport default function Table() {\n\tconst { data, header } = useSelector(state => state.tableModule)\n\n\tif (!data)\n\t\treturn (\n\t\t\t<section className='table-empty'>\n\t\t\t\t<span>No Data Available, please </span>\n\t\t\t\t<label htmlFor='file'>upload a CSV file</label>\n\t\t\t\t<span> first.</span>\n\t\t\t</section>\n\t\t)\n\n\tconst getRowData = row => {\n\t\tconst strHtmls = []\n\t\tfor (const key in row) {\n\t\t\tstrHtmls.push(row[key])\n\t\t}\n\t\treturn strHtmls.map((str, idx) => <td key={idx}>{str ?? ''}</td>)\n\t}\n\n\tconst headers = data[0] ? Object.keys(data[0]) : []\n\treturn (\n\t\t<section className='table-container'>\n\t\t\t{header && <h2>{header}</h2>}\n\t\t\t<table>\n\t\t\t\t<thead>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t{headers.map(header => (\n\t\t\t\t\t\t\t<th key={header}>{header}</th>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</tr>\n\t\t\t\t</thead>\n\t\t\t\t<tbody>\n\t\t\t\t\t{data.map((row, idx) => (\n\t\t\t\t\t\t<tr key={idx}>{getRowData(row)}</tr>\n\t\t\t\t\t))}\n\t\t\t\t</tbody>\n\t\t\t</table>\n\t\t</section>\n\t)\n}\n","import { setTableData } from '../store/actions/tableActions.js'\nimport { useSelector, useDispatch } from 'react-redux'\n\nexport default function Enrich() {\n\tconst dispatch = useDispatch()\n\tconst { data } = useSelector(state => state.tableModule)\n\tconst userMsg = useSelector(state => state.userMsgModule)\n\n\tconst onEnrich = async () => {\n\t\tdispatch(setTableData(data))\n\t}\n\n\treturn (\n\t\t<section className='enrich'>\n\t\t\t<button disabled={!data.length || userMsg.type !== 'done'} onClick={onEnrich}>\n\t\t\t\tFind Schools\n\t\t\t</button>\n\t\t</section>\n\t)\n}\n","import { useSelector } from 'react-redux'\n\nexport default function UserMsg() {\n\tconst { msg, highlight, type } = useSelector(state => state.userMsgModule)\n\treturn (\n\t\t<section className={'user-msg ' + type}>\n\t\t\t<p>\n\t\t\t\t{msg} <span>{highlight}</span>\n\t\t\t</p>\n\t\t</section>\n\t)\n}\n","import Header from '../cmps/Header'\nimport Upload from '../cmps/Upload'\nimport Table from '../cmps/Table'\nimport Enrich from '../cmps/Enrich'\nimport UserMsg from '../cmps/UserMsg'\n\nfunction App() {\n\treturn (\n\t\t<main className='app'>\n\t\t\t<Header />\n\t\t\t<section className='content'>\n\t\t\t\t<Upload />\n\t\t\t\t<Enrich />\n\t\t\t\t<Table />\n\t\t\t\t<UserMsg />\n\t\t\t</section>\n\t\t</main>\n\t)\n}\n\nexport default App\n","const INITIAL_STATE = {\n\tdata: [],\n\theader: '',\n}\n\nexport const tableReducer = (state = INITIAL_STATE, action) => {\n\tswitch (action.type) {\n\t\tcase 'SET_DATA':\n\t\t\treturn { ...state, data: action.data }\n\t\tcase 'SET_HEADER':\n\t\t\treturn { ...state, header: action.header }\n\t\tdefault:\n\t\t\treturn state\n\t}\n}\n","const INITIAL_STATE = {\n\tmsg: '',\n\thighlight: '',\n\ttype: 'done',\n}\n\nexport const userMsgReducer = (state = INITIAL_STATE, action) => {\n\tswitch (action.type) {\n\t\tcase 'SET_USER_MSG':\n\t\t\treturn { ...state, ...action.userMsg }\n\t\tdefault:\n\t\t\treturn state\n\t}\n}\n","import { applyMiddleware, combineReducers, compose, createStore } from 'redux'\nimport thunk from 'redux-thunk'\nimport { tableReducer } from './reducers/tableReducer'\nimport { userMsgReducer } from './reducers/userMsgReducer'\n\n// Connecting redux devtools\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose\n\n// Combining reducers into one\nconst rootReducer = combineReducers({\n\ttableModule: tableReducer,\n\tuserMsgModule: userMsgReducer,\n})\n\nexport const store = createStore(rootReducer, composeEnhancers(applyMiddleware(thunk)))\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './pages/App.jsx'\nimport './styles/styles.scss'\nimport { store } from './store'\nimport { Provider } from 'react-redux'\n\nReactDOM.render(\n\t<React.StrictMode>\n\t\t<Provider store={store}>\n\t\t\t<App />\n\t\t</Provider>\n\t</React.StrictMode>,\n\tdocument.getElementById('root')\n)\n"],"sourceRoot":""}