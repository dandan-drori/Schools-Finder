(this["webpackJsonphome-assignment"]=this["webpackJsonphome-assignment"]||[]).push([[0],{55:function(e,t,n){},56:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(9),s=n.n(c),i=n(1);function u(){return Object(i.jsx)("section",{className:"header",children:Object(i.jsx)("p",{children:"Schools Finder"})})}var o=n(6),l=n(2),j=n.n(l),h=n(4),p=n(3),f=n(22),b=n.n(f),d="/api/",O={enrichData:function(e){return x.apply(this,arguments)},formatData:function(e){var t=e.split("\r\n"),n=t[0].split(",");return t.splice(1).filter((function(e){return e})).map((function(e){var t,r=e.split(",");return t={},Object(p.a)(t,n[0],+r[0]),Object(p.a)(t,n[1],r[1]),Object(p.a)(t,n[2],r[2]),Object(p.a)(t,n[3],+r[3]),Object(p.a)(t,n[4],+r[4]),Object(p.a)(t,n[5],r[5]),Object(p.a)(t,n[6],+r[6]),Object(p.a)(t,n[7],+r[7]),Object(p.a)(t,n[8],+r[8]),Object(p.a)(t,n[9],+r[9]),Object(p.a)(t,n[10],+r[10]),Object(p.a)(t,n[11],r[11]?+r[11]:""),Object(p.a)(t,n[12],+r[12]),Object(p.a)(t,n[13],+r[13]),t}))}};function x(){return(x=Object(h.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.post("".concat(d,"enrich"),{data:t});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2e3;return function(){var t=Object(h.a)(j.a.mark((function t(n){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:setTimeout((function(){n({type:"SET_USER_MSG",userMsg:{msg:"",highlight:"",type:"done"}})}),e);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}function g(e,t){return function(){var n=Object(h.a)(j.a.mark((function n(r){var a,c,s;return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t){n.next=5;break}a=O.formatData(e),r({type:"SET_DATA",data:a}),n.next=18;break;case 5:return n.prev=5,r(function(){var e=Object(h.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:"SET_USER_MSG",userMsg:{msg:"Fetching data",highlight:"...",type:"fetching"}});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.next=9,O.enrichData(e);case 9:c=n.sent,s=c.enrichedData,r({type:"SET_DATA",data:s}),r(function(){var e=Object(h.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:"SET_USER_MSG",userMsg:{msg:"Data loaded successfully",highlight:":)",type:"success"}}),t(v());case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.next=18;break;case 15:n.prev=15,n.t0=n.catch(5),r(function(){var e=Object(h.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:"SET_USER_MSG",userMsg:{msg:"Data loading failed",highlight:":(",type:"fail"}}),t(v());case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 18:case"end":return n.stop()}}),n,null,[[5,15]])})));return function(e){return n.apply(this,arguments)}}()}function m(){var e=Object(o.b)(),t=function(t){var n=new FileReader;n.onload=function(){e(g(n.result,!0))},n.readAsText(t)};return Object(i.jsxs)("section",{className:"upload",children:[Object(i.jsx)("label",{htmlFor:"file",children:"Choose File"}),Object(i.jsx)("input",{type:"file",id:"file",name:"file",onChange:function(n){var r,a=n.target.files[0];if(a){if("text/csv"!==a.type)return e(function(){var e=Object(h.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:"SET_USER_MSG",userMsg:{msg:"Invalid file type",highlight:"!",type:"error"}}),t(v());case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());e((r=a.name,function(){var e=Object(h.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:"SET_HEADER",header:r});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),t(a)}}})]})}function y(){var e=Object(o.c)((function(e){return e.tableModule})),t=e.data,n=e.header;if(!t)return Object(i.jsxs)("section",{className:"table-empty",children:[Object(i.jsx)("span",{children:"No Data Available, please "}),Object(i.jsx)("label",{htmlFor:"file",children:"upload a CSV file"}),Object(i.jsx)("span",{children:" first."})]});var r=function(e){var t=[];for(var n in e)t.push(e[n]);return t.map((function(e,t){return Object(i.jsx)("td",{children:null!==e&&void 0!==e?e:""},t)}))},a=t[0]?Object.keys(t[0]):[];return Object(i.jsxs)("section",{className:"table-container",children:[n&&Object(i.jsx)("h2",{children:n}),Object(i.jsxs)("table",{children:[Object(i.jsx)("thead",{children:Object(i.jsx)("tr",{children:a.map((function(e){return Object(i.jsx)("th",{children:e},e)}))})}),Object(i.jsx)("tbody",{children:t.map((function(e,t){return Object(i.jsx)("tr",{children:r(e)},t)}))})]})]})}function S(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.tableModule})).data,n=Object(o.c)((function(e){return e.userMsgModule})),r=function(){var n=Object(h.a)(j.a.mark((function n(){return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e(g(t));case 1:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return Object(i.jsx)("section",{className:"enrich",children:Object(i.jsx)("button",{disabled:!t.length||"done"!==n.type,onClick:r,children:"Find Schools"})})}function E(){var e=Object(o.c)((function(e){return e.userMsgModule})),t=e.msg,n=e.highlight,r=e.type;return Object(i.jsx)("section",{className:"user-msg "+r,children:Object(i.jsxs)("p",{children:[t," ",Object(i.jsx)("span",{children:n})]})})}var w=function(){return Object(i.jsxs)("main",{className:"app",children:[Object(i.jsx)(u,{}),Object(i.jsxs)("section",{className:"content",children:[Object(i.jsx)(m,{}),Object(i.jsx)(S,{}),Object(i.jsx)(y,{}),Object(i.jsx)(E,{})]})]})},_=(n(55),n(8)),M=n(23),T=n(7),k={data:[],header:""},D={msg:"",highlight:"",type:"done"},N=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||_.c,A=Object(_.b)({tableModule:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_DATA":return Object(T.a)(Object(T.a)({},e),{},{data:t.data});case"SET_HEADER":return Object(T.a)(Object(T.a)({},e),{},{header:t.header});default:return e}},userMsgModule:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER_MSG":return Object(T.a)(Object(T.a)({},e),t.userMsg);default:return e}}}),R=Object(_.d)(A,N(Object(_.a)(M.a)));s.a.render(Object(i.jsx)(a.a.StrictMode,{children:Object(i.jsx)(o.a,{store:R,children:Object(i.jsx)(w,{})})}),document.getElementById("root"))}},[[56,1,2]]]);
//# sourceMappingURL=main.6bf9b9e2.chunk.js.map